{% extends "base.html" %}
{% load i18n %}

{% block title %}
    {{ object.title }}
{% endblock %}

{% block content %}
<div class="container admin">
    <h1 class="header">
        {{ module.title }}
    </h1>
    <div class="admin__nav">
        <ul id="modules" class="menu">
        {% for m in object.modules.all %}
            <li data-id="{{ m.id }}" class="{% if m == module %}selected{% endif %} menu__item">
                <a class="menu__link" href="{% url 'students:student_course_detail_module' object.id m.id %}">
                    <span> 
                        Module <span class="order">{{ m.order|add:1 }}</span>
                    </span>
                    <br>
                    {{ m.title }}
                </a> 
            </li>
        {% empty %}
            <li class="menu__item">No modules yet.</li>
        {% endfor %}
        </ul> 
    </div>
    <div class="admin__main">
        <div class="modules">
            {% for content in module.contents.all %}
            <div class="card">
            {% with item=content.item %}
                <h2 style="color: black;">{{ item.title }}</h2>
                
                <!-- Simple Debug Info
                <div style="background: yellow; padding: 10px; color: black; border: 2px solid red;">
                    <p><strong>DEBUGGING:</strong></p>
                    <p>Content Type: {{ content.content_type.model }}</p>
                    <p>Item Object: {{ item }}</p>
                    <p>Has content field: {% if item.content %}YES - "{{ item.content|truncatechars:100 }}"{% else %}NO{% endif %}</p>
                    <p>Has body field: {% if item.body %}YES - "{{ item.body|truncatechars:100 }}"{% else %}NO{% endif %}</p>
                    <p>Has text field: {% if item.text %}YES - "{{ item.text|truncatechars:100 }}"{% else %}NO{% endif %}</p>
                </div> -->
                
                <!-- Try to display content -->
                <div style="color: black; margin-top: 20px; border: 2px solid blue; padding: 10px;">
                    <h3>Content Display Attempts:</h3>
                    
                    <h4>Content</h4>
                    {% if item.content %}
                        {{ item.content|linebreaks }}
                    {% else %}
                        <p style="color: red;">item.content is empty or doesn't exist</p>
                    {% endif %}
                    
                    <h4>Method 2 - item.body:</h4>
                    {% if item.body %}
                        {{ item.body|linebreaks }}
                    {% else %}
                        <p style="color: red;">item.body is empty or doesn't exist</p>
                    {% endif %}
                    
                    <h4>Method 3 - item.text:</h4>
                    {% if item.text %}
                        {{ item.text|linebreaks }}
                    {% else %}
                        <p style="color: red;">item.text is empty or doesn't exist</p>
                    {% endif %}
                    
                    <h4>Method 4 - item.render:</h4>
                    {{ item.render }}
                </div>
            {% endwith %}
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<style>
.card h2,
.card div,
.card * {
    color: black !important;
}
</style>
{% endblock %}